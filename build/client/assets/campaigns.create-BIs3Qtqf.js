import{j as t}from"./jsx-runtime-DlxonYWr.js";import{r}from"./index-BWtVRBRF.js";import{u as ve,c as i}from"./CampaignContext-CseAoGoJ.js";import{u as Ce}from"./PlanContext-BY9hTbym.js";import{S as $e,a as pe,b as Fe,c as Te,d as ke}from"./StepFour-Cs5PjVhS.js";import{b as Se}from"./index-CaEtZ44U.js";import"./_commonjsHelpers-gnU0ypJ3.js";import"./index-CSX1f1C-.js";import"./index-Crcs4hqE.js";function De(){var h,p,u,g,f,y,b,j,w,N,v,C,$,F,T,k,S,z,E,O;const{campaignData:e,updateCampaignData:c,checkCanCreateCampaign:d,saveCampaign:ue}=ve(),{currentPlan:m}=Ce(),[ge,fe]=r.useState(!1),[ze,ye]=r.useState(!1),[be,l]=r.useState(!1),n=Se();r.useEffect(()=>{console.log("CreateCampaign rendered, current step:",e.step),i.success("Campaign creator loaded!")},[]),r.useEffect(()=>{d()||fe(!0)},[d]),r.useEffect(()=>{console.log("Initializing campaign data"),c({name:"Campaign Name",step:1,look:"custom",color:"singleTone",primaryColor:"#fe5300",secondaryColor:"#767676",tertiaryColor:"#444444",completionPercentage:25})},[c]);const x=async s=>{try{console.log("Launching campaign with status:",s);const a={...e,id:e.id||`campaign-${Date.now()}`,status:s||"draft",createdAt:new Date().toISOString()},o=await ue(a);console.log("Campaign saved successfully:",o),ye(!1),l(!1),i.success(`Campaign ${s==="active"?"launched":"saved"} successfully!`),setTimeout(()=>{n("/campaigns")},500)}catch(a){console.error("Error saving campaign:",a),i.error(`Error: ${a.message||"Failed to save campaign"}`)}},je=()=>{l(!0)},we=()=>{switch(console.log("Rendering step:",e.step),e.step){case 1:return t.jsx(pe,{});case 2:return t.jsx(ke,{});case 3:return t.jsx(Te,{});case 4:return t.jsx(Fe,{});default:return t.jsx(pe,{})}},Ne=()=>{var a,o,P,L,I,M,R,A,B,D,H,W,U,Y,K,V,_,q,G,J,Q,X,Z,ee,te,ae,se,re,oe,le,ne,ie,ce,de,me,xe,he;const s=((a=e.layout)==null?void 0:a.wheelSectors)||"eight";return t.jsx("div",{className:"relative w-[220px] h-[220px]",children:t.jsxs("div",{className:"w-full h-full rounded-full",style:{background:s==="four"?`conic-gradient(
                    ${e.primaryColor} 0deg, 
                    ${e.primaryColor} 90deg, 
                    ${e.color==="dualTone"?e.secondaryColor:"white"} 90deg, 
                    ${e.color==="dualTone"?e.secondaryColor:"white"} 180deg, 
                    ${e.primaryColor} 180deg, 
                    ${e.primaryColor} 270deg, 
                    ${e.color==="dualTone"?e.secondaryColor:"white"} 270deg, 
                    ${e.color==="dualTone"?e.secondaryColor:"white"} 360deg
                  )`:s==="six"?`conic-gradient(
                      ${e.primaryColor} 0deg, 
                      ${e.primaryColor} 60deg, 
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 60deg, 
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 120deg, 
                      ${e.primaryColor} 120deg, 
                      ${e.primaryColor} 180deg,
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 180deg, 
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 240deg,
                      ${e.primaryColor} 240deg, 
                      ${e.primaryColor} 300deg,
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 300deg, 
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 360deg
                    )`:`conic-gradient(
                      ${e.primaryColor} 0deg, 
                      ${e.primaryColor} 45deg, 
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 45deg, 
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 90deg,
                      ${e.primaryColor} 90deg, 
                      ${e.primaryColor} 135deg,
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 135deg, 
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 180deg,
                      ${e.primaryColor} 180deg, 
                      ${e.primaryColor} 225deg,
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 225deg, 
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 270deg,
                      ${e.primaryColor} 270deg, 
                      ${e.primaryColor} 315deg,
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 315deg, 
                      ${e.color==="dualTone"?e.secondaryColor:"white"} 360deg
                    )`},children:[t.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:t.jsx("div",{className:"w-10 h-10 rounded-full bg-black"})}),s==="four"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute top-1/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold",children:((P=(o=e.prizes)==null?void 0:o[0])==null?void 0:P.text)||"10% OFF"}),t.jsx("div",{className:"absolute top-1/2 left-3/4 transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold rotate-90",children:((I=(L=e.prizes)==null?void 0:L[1])==null?void 0:I.text)||"FREE SHIP"}),t.jsx("div",{className:"absolute top-3/4 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold rotate-180",children:((R=(M=e.prizes)==null?void 0:M[2])==null?void 0:R.text)||"20% OFF"}),t.jsx("div",{className:"absolute top-1/2 left-1/4 transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold -rotate-90",children:((B=(A=e.prizes)==null?void 0:A[3])==null?void 0:B.text)||"NO LUCK"})]}),s==="six"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute top-[13%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold",children:((H=(D=e.prizes)==null?void 0:D[0])==null?void 0:H.text)||"10% OFF"}),t.jsx("div",{className:"absolute top-[30%] left-[80%] transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold rotate-60",children:((U=(W=e.prizes)==null?void 0:W[1])==null?void 0:U.text)||"FREE SHIP"}),t.jsx("div",{className:"absolute top-[70%] left-[80%] transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold rotate-120",children:((K=(Y=e.prizes)==null?void 0:Y[2])==null?void 0:K.text)||"15% OFF"}),t.jsx("div",{className:"absolute top-[87%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold rotate-180",children:((_=(V=e.prizes)==null?void 0:V[3])==null?void 0:_.text)||"20% OFF"}),t.jsx("div",{className:"absolute top-[70%] left-[20%] transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold -rotate-120",children:((G=(q=e.prizes)==null?void 0:q[4])==null?void 0:G.text)||"5% OFF"}),t.jsx("div",{className:"absolute top-[30%] left-[20%] transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold -rotate-60",children:((Q=(J=e.prizes)==null?void 0:J[5])==null?void 0:Q.text)||"NO LUCK"})]}),(s==="eight"||!1)&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"absolute top-[10%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold",children:((Z=(X=e.prizes)==null?void 0:X[0])==null?void 0:Z.text)||"10% OFF"}),t.jsx("div",{className:"absolute top-[25%] left-[85%] transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold rotate-45",children:((te=(ee=e.prizes)==null?void 0:ee[1])==null?void 0:te.text)||"FREE SHIP"}),t.jsx("div",{className:"absolute top-1/2 left-[90%] transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold rotate-90",children:((se=(ae=e.prizes)==null?void 0:ae[2])==null?void 0:se.text)||"5% OFF"}),t.jsx("div",{className:"absolute top-[75%] left-[85%] transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold rotate-135",children:((oe=(re=e.prizes)==null?void 0:re[3])==null?void 0:oe.text)||"20% OFF"}),t.jsx("div",{className:"absolute top-[90%] left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold rotate-180",children:((ne=(le=e.prizes)==null?void 0:le[4])==null?void 0:ne.text)||"FREE SHIP"}),t.jsx("div",{className:"absolute top-[75%] left-[15%] transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold -rotate-135",children:((ce=(ie=e.prizes)==null?void 0:ie[5])==null?void 0:ce.text)||"5% OFF"}),t.jsx("div",{className:"absolute top-1/2 left-[10%] transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold -rotate-90",children:((me=(de=e.prizes)==null?void 0:de[6])==null?void 0:me.text)||"20% OFF"}),t.jsx("div",{className:"absolute top-[25%] left-[15%] transform -translate-x-1/2 -translate-y-1/2 text-sm font-bold -rotate-45",children:((he=(xe=e.prizes)==null?void 0:xe[7])==null?void 0:he.text)||"10% OFF"})]})]})})};return t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsxs("div",{className:"container mx-auto px-4 py-8 pb-32",children:[t.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Create Campaign"}),we()]}),t.jsx($e,{onNext:()=>{e.step===4&&je()},nextButtonText:e.step===4?"Finish":"Continue"}),ge&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[t.jsx("h3",{className:"text-xl font-bold mb-4",children:"Campaign Limit Reached"}),t.jsxs("p",{className:"text-gray-600 mb-6",children:["You've reached the limit of ",m.campaignLimit," campaigns for your ",m.name," plan. Please upgrade your plan to create more campaigns."]}),t.jsxs("div",{className:"flex justify-end space-x-3",children:[t.jsx("button",{onClick:()=>n("/campaigns"),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"Back to Campaigns"}),t.jsx("button",{onClick:()=>n("/pricing"),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Upgrade Plan"})]})]})}),be&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg max-w-4xl w-full p-0 relative",children:[t.jsx("button",{onClick:()=>l(!1),className:"absolute top-4 right-4 z-10",children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsxs("div",{className:"p-8 bg-indigo-900 text-white text-center",children:[t.jsx("h2",{className:"text-4xl font-bold mb-2",children:"READY, SET, LAUNCH!"}),t.jsx("p",{className:"text-xl",children:"Your campaign can now shine on your site."})]}),t.jsx("div",{className:"p-6",children:t.jsx("div",{className:"bg-white rounded-lg shadow-lg w-full overflow-hidden",children:t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"text-center mb-4",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-2",children:e.logo?t.jsx("img",{src:e.logo||"/placeholder.svg",alt:"Campaign Logo",className:"w-full h-full object-contain"}):t.jsx("div",{className:"w-full h-full rounded-full flex items-center justify-center",style:{backgroundColor:e.primaryColor||"#ff5722"},children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),t.jsx("h3",{className:"text-2xl font-bold",style:{color:e.primaryColor||"#ff5722"},children:e.name||"Swiggy"}),t.jsx("h4",{className:"text-2xl font-bold mb-4",style:{color:e.primaryColor||"#ff5722"},children:((p=(h=e.content)==null?void 0:h.landing)==null?void 0:p.title)||"SPIN TO WIN"})]}),t.jsx("p",{className:"text-sm text-gray-600 text-center mb-4",children:((g=(u=e.content)==null?void 0:u.landing)==null?void 0:g.subtitle)||"Before you go anywhere, enter your email address to spin the wheel for a chance to win a wicked awesome discount."}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[t.jsxs("div",{className:"w-full md:w-1/2",children:[((y=(f=e.content)==null?void 0:f.landing)==null?void 0:y.showPrivacyPolicy)!==!1&&t.jsxs("div",{className:"flex items-center mb-2 w-full",children:[t.jsx("input",{type:"checkbox",id:"privacy-notice",className:"mr-2",checked:!0,readOnly:!0}),t.jsx("label",{htmlFor:"privacy-notice",className:"text-xs",children:((j=(b=e.content)==null?void 0:b.landing)==null?void 0:j.privacyPolicyText)||"I accept the Privacy Notice."})]}),((N=(w=e.content)==null?void 0:w.landing)==null?void 0:N.showTerms)!==!1&&t.jsxs("div",{className:"flex items-center mb-4 w-full",children:[t.jsx("input",{type:"checkbox",id:"terms",className:"mr-2",checked:!0,readOnly:!0}),t.jsx("label",{htmlFor:"terms",className:"text-xs",children:((C=(v=e.content)==null?void 0:v.landing)==null?void 0:C.termsText)||"I accept the Terms & Conditions."})]}),((F=($=e.content)==null?void 0:$.landing)==null?void 0:F.showEmail)!==!1&&t.jsx("input",{type:"email",placeholder:((k=(T=e.content)==null?void 0:T.landing)==null?void 0:k.emailPlaceholder)||"Enter your email",className:"w-full p-3 border rounded-md mb-4 text-center"}),t.jsx("button",{className:"w-full py-3 font-bold text-white rounded-md text-lg",style:{backgroundColor:e.primaryColor||"#ff5722"},children:((z=(S=e.content)==null?void 0:S.landing)==null?void 0:z.buttonText)||"SPIN NOW"}),t.jsx("p",{className:"text-xs text-gray-500 mt-3 text-center",children:((O=(E=e.content)==null?void 0:E.landing)==null?void 0:O.noThanksText)||"No, I don't feel lucky today!"})]}),t.jsx("div",{className:"w-full md:w-1/2 flex justify-center items-center",children:t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute inset-0 w-full h-full rounded-full",style:{background:"radial-gradient(circle, transparent 80%, white 80%, white 83%, transparent 83%)",backgroundSize:"100% 100%",transform:"scale(1.05)",pointerEvents:"none"},children:Array.from({length:24}).map((s,a)=>t.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full",style:{top:`${50-45*Math.cos(a*(Math.PI/12))}%`,left:`${50+45*Math.sin(a*(Math.PI/12))}%`}},a))}),Ne()]})})]})]})})}),t.jsxs("div",{className:"p-6 flex justify-center space-x-4",children:[t.jsx("button",{onClick:()=>{x("draft")},className:"px-8 py-3 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors font-medium",children:"Later"}),t.jsx("button",{onClick:()=>{x("active")},className:"px-8 py-3 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors font-medium",children:"Activate Now"})]}),t.jsx("div",{className:"text-center pb-6",children:t.jsxs("p",{className:"text-gray-600",children:["Easily activate or pause your campaigns anytime in"," ",t.jsx("span",{className:"font-medium",children:"All Campaigns"}),"."]})})]})})]})}export{De as default};
