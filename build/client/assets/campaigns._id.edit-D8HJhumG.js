import{j as a}from"./jsx-runtime-DlxonYWr.js";import{r as i}from"./index-BWtVRBRF.js";import{u as N,c as l}from"./CampaignContext-3XUkqNZH.js";import{N as d}from"./Navigation-Rq2-uA4h.js";import{S,a as p,b as y,c as w,d as E}from"./StepFour-h3JiGo8n.js";import{a as k,b as D}from"./index-DjMk7jIJ.js";import"./_commonjsHelpers-gnU0ypJ3.js";import"./PlanContext-BY9hTbym.js";import"./index-CSX1f1C-.js";import"./index-Crcs4hqE.js";import"./components-CJ4Us95c.js";function $(){const{id:s}=k(),r=D(),{allCampaigns:t,updateCampaignData:m,campaignData:n,saveCampaign:g}=N(),[u,x]=i.useState(!0),[h,c]=i.useState(!1),[f,v]=i.useState(null);console.log("CampaignEdit component rendering with ID:",s),console.log("All campaigns available:",t),i.useEffect(()=>{console.log("Looking for campaign with ID:",s),console.log("Available campaigns:",t);const e=t.find(o=>o.id===s);e?(console.log("Found campaign for editing:",e),v(e),m({...e,step:1,completionPercentage:25}),x(!1)):(console.error("Campaign not found:",s),l.error("Campaign not found"),r("/campaigns"))},[s,t,m,r]);const j=async()=>{try{const o={...f||{},...n,id:s,updatedAt:new Date().toISOString()};console.log("Saving updated campaign:",o),await g(o),l.success("Campaign updated successfully!"),c(!1),setTimeout(()=>{r("/campaigns")},500)}catch(e){console.error("Error saving campaign:",e),l.error(`Error: ${e.message||"Failed to save campaign"}`)}},b=()=>{c(!0)},C=()=>{switch(n.step){case 1:return a.jsx(p,{});case 2:return a.jsx(E,{});case 3:return a.jsx(w,{});case 4:return a.jsx(y,{});default:return a.jsx(p,{})}};return u?a.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a.jsx(d,{}),a.jsxs("div",{className:"mt-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500 mx-auto"}),a.jsx("p",{className:"mt-4",children:"Loading campaign..."})]})]}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a.jsx(d,{createButtonText:"Back to Campaigns"}),a.jsxs("div",{className:"mt-8 pb-32",children:[a.jsxs("h1",{className:"text-3xl font-bold mb-8",children:["Edit Campaign: ",n.name]}),C()]}),a.jsx(S,{onNext:()=>{n.step===4&&b()},nextButtonText:n.step===4?"Save Changes":"Continue"}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Save Campaign Changes"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to save your changes to "',n.name,'"?']}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:j,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Save Changes"})]})]})})]})})}export{$ as default};
