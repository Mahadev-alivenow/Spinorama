import{r as t,j as e}from"./index-Dxzwlmmu.js";import{u as D,c as S}from"./CampaignContext-C7gPG95t.js";import{N as o}from"./Navigation-DNSlwuPt.js";import{a as L,b as A}from"./index-CKWc00xI.js";import{L as v}from"./components-DcZ5TJaC.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./PlanContext-CgoqeIeO.js";import"./index-K0fwup_a.js";function B(){var c,m,x,g,p,u,h,y,j,f,N,b,C;const{id:l}=L(),n=A(),{allCampaigns:i}=D(),[s,w]=t.useState(null),[$,k]=t.useState(!0);t.useEffect(()=>{console.log("Looking for campaign with ID:",l),console.log("Available campaigns:",i);const a=i.find(r=>r.id===l);a?(console.log("Found campaign for viewing:",a),w(a),k(!1)):(console.error("Campaign not found:",l),S.error("Campaign not found"),n("/campaigns"))},[l,i,n]);const T=()=>{console.log("Navigating to edit campaign:",l),n(`/campaigns/edit/${l}`)},d=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A";return $?e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx(o,{}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500 mx-auto"}),e.jsx("p",{className:"mt-4",children:"Loading campaign..."})]})]}):s?e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx(o,{}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:s.name}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${s.status==="active"?"bg-green-100 text-green-800":s.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:s.status.charAt(0).toUpperCase()+s.status.slice(1)}),e.jsxs("span",{className:"text-gray-500 text-sm ml-4",children:["Created: ",d(s.createdAt)]}),s.updatedAt&&e.jsxs("span",{className:"text-gray-500 text-sm ml-4",children:["Updated: ",d(s.updatedAt)]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:T,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Edit Campaign"}),e.jsx(v,{to:"/campaigns",className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Back to Campaigns"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden mb-8",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Campaign Preview"}),e.jsx("div",{className:"bg-gray-100 p-4 rounded-lg",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"w-full md:w-1/2 p-4",children:[e.jsx("h3",{className:"text-2xl font-bold mb-2",style:{color:s.primaryColor},children:((m=(c=s.content)==null?void 0:c.landing)==null?void 0:m.title)||"SPIN TO WIN"}),e.jsx("p",{className:"text-gray-700 text-sm mb-4",children:((g=(x=s.content)==null?void 0:x.landing)==null?void 0:g.subtitle)||"Enter your email to spin the wheel for a chance to win a discount."}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"email",placeholder:"Enter your email",className:"w-full border border-gray-300 rounded-md p-2 text-center",readOnly:!0})}),e.jsx("button",{className:"w-full py-3 rounded-md font-bold text-white mb-2",style:{backgroundColor:s.primaryColor},children:((u=(p=s.content)==null?void 0:p.landing)==null?void 0:u.buttonText)||"SPIN NOW"})]}),e.jsx("div",{className:"w-full md:w-1/2 flex items-center justify-center p-4",children:e.jsx("div",{className:"relative w-48 h-48",children:e.jsx("div",{className:"w-full h-full rounded-full",style:{background:s.color==="dualTone"?`conic-gradient(
                          ${s.primaryColor} 0deg, 
                          ${s.primaryColor} 45deg, 
                          ${s.secondaryColor} 45deg, 
                          ${s.secondaryColor} 90deg,
                          ${s.primaryColor} 90deg, 
                          ${s.primaryColor} 135deg,
                          ${s.secondaryColor} 135deg, 
                          ${s.secondaryColor} 180deg,
                          ${s.primaryColor} 180deg, 
                          ${s.primaryColor} 225deg,
                          ${s.secondaryColor} 225deg, 
                          ${s.secondaryColor} 270deg,
                          ${s.primaryColor} 270deg, 
                          ${s.primaryColor} 315deg,
                          ${s.secondaryColor} 315deg, 
                          ${s.secondaryColor} 360deg
                        )`:`conic-gradient(
                          ${s.primaryColor} 0deg, 
                          ${s.primaryColor} 45deg, 
                          white 45deg, 
                          white 90deg,
                          ${s.primaryColor} 90deg, 
                          ${s.primaryColor} 135deg,
                          white 135deg, 
                          white 180deg,
                          ${s.primaryColor} 180deg, 
                          ${s.primaryColor} 225deg,
                          white 225deg, 
                          white 270deg,
                          ${s.primaryColor} 270deg, 
                          ${s.primaryColor} 315deg,
                          white 315deg, 
                          white 360deg
                        )`},children:e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 rounded-full bg-black"})})})})})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Campaign Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Design"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Look:"}),e.jsx("span",{children:s.look==="custom"?"Custom Layout":"Ready-Made Template"})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Color Scheme:"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:s.color==="singleTone"?"Single Tone":"Dual Tone"}),e.jsx("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:s.primaryColor}}),s.color==="dualTone"&&e.jsx("div",{className:"w-4 h-4 rounded-full ml-1",style:{backgroundColor:s.secondaryColor}})]})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Display Style:"}),e.jsx("span",{children:((h=s.layout)==null?void 0:h.displayStyle)==="popup"?"Pop-up":"Full Screen"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium mb-3",children:"Rules"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Appearing Rules:"}),e.jsx("span",{children:Object.entries(((y=s.rules)==null?void 0:y.appearingRules)||{}).filter(([a,r])=>r.enabled).map(([a])=>a.charAt(0).toUpperCase()+a.slice(1)).join(", ")||"None"})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Page Targeting:"}),e.jsx("span",{children:(f=(j=s.rules)==null?void 0:j.pageTargeting)!=null&&f.enabled?"Enabled":"Disabled"})]}),e.jsxs("li",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Display Frequency:"}),e.jsx("span",{children:((C=(b=(N=s.rules)==null?void 0:N.displayFrequency)==null?void 0:b.frequency)==null?void 0:C.replace(/_/g," "))||"Once a day"})]})]})]})]})]})]})]})]}):e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx(o,{}),e.jsxs("div",{className:"mt-8 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Campaign Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The campaign you're looking for doesn't exist or has been deleted."}),e.jsx(v,{to:"/campaigns",className:"text-indigo-600 hover:underline",children:"Back to Campaigns"})]})]})}export{B as default};
