import{j as a}from"./jsx-runtime-DlxonYWr.js";import{r}from"./index-DL0tHwE6.js";import{u as N,c as l}from"./CampaignContext-DDS0XVRo.js";import{N as w}from"./Navigation-tG41YSv9.js";import{S as y,a as d,b as S,c as k,d as E}from"./StepFour-D3JfMhFE.js";import{a as L,b as D}from"./index-DRO-3EAr.js";import"./_commonjsHelpers-D6-XlEtG.js";import"./PlanContext-CABF9B4g.js";import"./components-DPlD0s3O.js";import"./index-a8qEWjHG.js";function W(){const{id:s}=L(),t=D(),{allCampaigns:o,updateCampaignData:m,campaignData:n,saveCampaign:g}=N(),[p,x]=r.useState(!0),[u,c]=r.useState(!1),[h,f]=r.useState(null);console.log("CampaignEdit component rendering with ID:",s),console.log("All campaigns available:",o),r.useEffect(()=>{console.log("Looking for campaign with ID:",s),console.log("Available campaigns:",o);const e=o.find(i=>i.id===s);e?(console.log("Found campaign for editing:",e),f(e),m({...e,step:1,completionPercentage:25}),x(!1)):(console.error("Campaign not found:",s),l.error("Campaign not found"),t("/campaigns"))},[s,o,m,t]);const v=async()=>{try{const i={...h||{},...n,id:s,updatedAt:new Date().toISOString()};console.log("Saving updated campaign:",i),await g(i),l.success("Campaign updated successfully!"),c(!1),setTimeout(()=>{t("/campaigns")},500)}catch(e){console.error("Error saving campaign:",e),l.error(`Error: ${e.message||"Failed to save campaign"}`)}},j=()=>{c(!0)},b=()=>{t("/campaigns")},C=()=>{switch(n.step){case 1:return a.jsx(d,{});case 2:return a.jsx(E,{});case 3:return a.jsx(k,{});case 4:return a.jsx(S,{});default:return a.jsx(d,{})}};return p?a.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a.jsx(w,{}),a.jsxs("div",{className:"mt-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500 mx-auto"}),a.jsx("p",{className:"mt-4",children:"Loading campaign..."})]})]}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"container mx-auto px-4 py-6",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("button",{onClick:b,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors flex items-center",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Campaigns"]})}),a.jsxs("div",{className:"mt-8 pb-32",children:[a.jsxs("h1",{className:"text-3xl font-bold mb-8",children:["Edit Campaign: ",n.name]}),a.jsx("div",{className:"flex flex-col md:flex-row gap-8",children:a.jsx("div",{className:"w-full ",children:C()})})]}),a.jsx(y,{onNext:()=>{n.step===4&&j()},nextButtonText:n.step===4?"Save Changes":"Continue"}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Save Campaign Changes"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:['Are you sure you want to save your changes to "',n.name,'"?']}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:v,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"Save Changes"})]})]})})]})})}export{W as default};
