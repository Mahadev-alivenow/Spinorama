import{j as e}from"./jsx-runtime-DlxonYWr.js";import{r as x}from"./index-BWtVRBRF.js";import{u as p,a as h,F as o}from"./components-BcvBrwNB.js";import{c as g}from"./index-DjMk7jIJ.js";import"./_commonjsHelpers-gnU0ypJ3.js";import"./index-Crcs4hqE.js";function w(){var c,l;const t=p(),i=h(),n=g(),[r,m]=x.useState(!1),a=n.state==="submitting",d=t.metafields.filter(s=>s.namespace==="wheel-of-wonders");return e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Settings"}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Campaign Settings"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Active Campaign"}),t.activeCampaign?e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded p-4",children:[e.jsx("p",{className:"font-medium text-green-800",children:t.activeCampaign.name}),e.jsxs("p",{className:"text-sm text-green-700",children:["ID: ",t.activeCampaign.id]}),e.jsxs("p",{className:"text-sm text-green-700",children:["Status: ",t.activeCampaign.status]}),e.jsxs("p",{className:"text-sm text-green-700",children:["Created:"," ",new Date(t.activeCampaign.createdAt).toLocaleString()]})]}):e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded p-4",children:e.jsx("p",{className:"text-yellow-700",children:"No active campaign found."})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(o,{method:"post",children:[e.jsx("input",{type:"hidden",name:"action",value:"test-db"}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors",disabled:a,children:a&&((c=n.formData)==null?void 0:c.get("action"))==="test-db"?"Testing...":"Test Database Connection"})]}),e.jsxs(o,{method:"post",children:[e.jsx("input",{type:"hidden",name:"action",value:"sync-metafields"}),e.jsx("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded hover:bg-green-700 transition-colors",disabled:a||!t.activeCampaign,children:a&&((l=n.formData)==null?void 0:l.get("action"))==="sync-metafields"?"Syncing...":"Sync Active Campaign to Store"})]})]}),i&&e.jsx("div",{className:`mt-4 p-4 rounded ${i.success?"bg-green-50 text-green-800":"bg-red-50 text-red-800"}`,children:e.jsx("p",{children:i.message})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"App Metafields"}),e.jsxs("button",{onClick:()=>m(!r),className:"text-blue-600 hover:underline",children:[r?"Hide":"Show"," Metafields"]})]}),r&&e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Namespace"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Key"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Value"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length>0?d.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.namespace}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s.key}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.value}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.type})]},s.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:'No wheel-of-wonders metafields found. Click "Sync Active Campaign to Store" to create them.'})})})]})})]})]})}export{w as default};
