import{j as e}from"./jsx-runtime-DlxonYWr.js";import{r as n}from"./index-BWtVRBRF.js";import{u as w}from"./CampaignContext-DQOm3mJ9.js";import{u as v}from"./PlanContext-BY9hTbym.js";import{N as C}from"./Navigation-DeiA2Yu1.js";import{u as k,L as m}from"./components-BEwuW2UH.js";import{b as D}from"./index-CuNWEgFx.js";import"./_commonjsHelpers-gnU0ypJ3.js";import"./index-CSX1f1C-.js";import"./index-Crcs4hqE.js";function T(){const{allCampaigns:a,deleteCampaign:x,checkCanCreateCampaign:p}=w(),{currentPlan:s}=v(),[g,r]=n.useState(!1),[h,i]=n.useState(null),[u]=k(),[y,l]=n.useState(u.get("upgrade")==="true"),c=D(),f=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),j=t=>{i(t),r(!0)},N=async()=>{try{await x(h),r(!1),i(null),alert("Campaign deleted successfully!")}catch(t){console.error("Error deleting campaign:",t),alert(`Error: ${t.message}`)}},b=()=>{r(!1),i(null)},o=()=>{p()?c("/campaigns/create"):l(!0)},d=()=>{c("/pricing")};return e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx(C,{}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"All Campaigns"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-500",children:"Current Plan: "}),e.jsx("span",{className:"font-medium capitalize",children:s.name}),e.jsxs("span",{className:"text-gray-500 ml-2",children:["(",a.length,"/",s.campaignLimit," campaigns)"]})]}),e.jsx("button",{onClick:d,className:"px-3 py-1 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 transition-colors text-sm",children:"Upgrade"}),e.jsx("button",{onClick:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Create New Campaign"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length>0?a.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mr-2",style:{backgroundColor:t.primaryColor||"#fe5300"}}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="active"?"bg-green-100 text-green-800":t.status==="draft"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.createdAt?f(t.createdAt):"N/A"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx(m,{to:`/campaigns/${t.id}`,className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"View"}),e.jsx(m,{to:`/campaigns/${t.id}/edit`,className:"text-indigo-600 hover:text-indigo-900 mr-4",children:"Edit"}),e.jsx("button",{className:"text-red-600 hover:text-red-900",onClick:()=>j(t.id),children:"Delete"})]})]},t.id)):e.jsx("tr",{children:e.jsxs("td",{colSpan:"4",className:"px-6 py-4 text-center text-sm text-gray-500",children:["No campaigns found."," ",e.jsx("button",{onClick:o,className:"text-indigo-600 hover:underline",children:"Create your first campaign"})]})})})]})})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Delete Campaign"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this campaign? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:b,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:N,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Delete"})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Campaign Limit Reached"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["You've reached the limit of ",s.campaignLimit," campaigns for your ",s.name," plan. Please upgrade your plan to create more campaigns."]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:d,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 transition-colors",children:"View Pricing"})]})]})})]})}export{T as default};
